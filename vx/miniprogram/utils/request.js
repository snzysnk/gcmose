"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.http = void 0;
const domain = "http://localhost:9002/v1";
function http(url, method, data) {
    return new Promise((resolve, reject) => {
        let tokenInfo = JSON.parse(wx.getStorageSync('tokenInfo'));
        let options = {
            url: domain + '/' + url,
            method: method,
            header: { Authorization: 'Bearer ' + tokenInfo.token },
            data,
            timeout: 6000,
            success: (response) => {
                if (response.statusCode >= 500) {
                    wx.showModal({
                        title: '系统提示',
                        content: '出错了',
                    });
                }
                else {
                    resolve(response.data);
                }
            },
            fail: reject
        };
        return wx.request(options);
    });
}
exports.http = http;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlcXVlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsTUFBTSxNQUFNLEdBQUcsMEJBQTBCLENBQUE7QUFFekMsU0FBZ0IsSUFBSSxDQUFDLEdBQVEsRUFBRSxNQUFXLEVBQUUsSUFBUztJQUNqRCxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ25DLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQzNELElBQUksT0FBTyxHQUFvQztZQUMzQyxHQUFHLEVBQUUsTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHO1lBQ3ZCLE1BQU0sRUFBRSxNQUFNO1lBQ2QsTUFBTSxFQUFFLEVBQUMsYUFBYSxFQUFFLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxFQUFDO1lBQ3BELElBQUk7WUFDSixPQUFPLEVBQUUsSUFBSTtZQUNiLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFO2dCQUNsQixJQUFJLFFBQVEsQ0FBQyxVQUFVLElBQUksR0FBRyxFQUFFO29CQUM1QixFQUFFLENBQUMsU0FBUyxDQUFDO3dCQUNULEtBQUssRUFBRSxNQUFNO3dCQUNiLE9BQU8sRUFBRSxLQUFLO3FCQUNqQixDQUFDLENBQUM7aUJBQ047cUJBQU07b0JBQ0gsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQTtpQkFDekI7WUFDTCxDQUFDO1lBQ0QsSUFBSSxFQUFFLE1BQU07U0FDZixDQUFBO1FBRUQsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFDO0FBRVAsQ0FBQztBQXpCRCxvQkF5QkMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkb21haW4gPSBcImh0dHA6Ly9sb2NhbGhvc3Q6OTAwMi92MVwiXG5cbmV4cG9ydCBmdW5jdGlvbiBodHRwKHVybDogYW55LCBtZXRob2Q6IGFueSwgZGF0YTogYW55KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IHRva2VuSW5mbyA9IEpTT04ucGFyc2Uod3guZ2V0U3RvcmFnZVN5bmMoJ3Rva2VuSW5mbycpKTtcbiAgICAgICAgbGV0IG9wdGlvbnM6IFdlY2hhdE1pbmlwcm9ncmFtLlJlcXVlc3RPcHRpb24gPSB7XG4gICAgICAgICAgICB1cmw6IGRvbWFpbiArICcvJyArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgICAgaGVhZGVyOiB7QXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgdG9rZW5JbmZvLnRva2VufSxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICB0aW1lb3V0OiA2MDAwLFxuICAgICAgICAgICAgc3VjY2VzczogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gNTAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+ezu+e7n+aPkOekuicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAn5Ye66ZSZ5LqGJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5kYXRhKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmYWlsOiByZWplY3RcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB3eC5yZXF1ZXN0KG9wdGlvbnMpO1xuICAgIH0pO1xuXG59Il19